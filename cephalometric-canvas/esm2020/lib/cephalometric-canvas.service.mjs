import { Injectable } from '@angular/core';
import ImageEffects from './domain/controllers/imageEffects';
import MainController from './domain/controllers/mainController';
import SemiautomaticLandmarks from './domain/features/semiautomatic_landmark/init';
import aJson from './domain/features/semiautomatic_landmark/routines/a.ldmk.json';
import enaJson from './domain/features/semiautomatic_landmark/routines/ena.ldmk.json';
import gnatioJson from './domain/features/semiautomatic_landmark/routines/gnatio.ldmk.json';
import nasioJson from './domain/features/semiautomatic_landmark/routines/nasio.ldmk.json';
import selaJson from './domain/features/semiautomatic_landmark/routines/sela.ldmk.json';
import OdontoradiosisKeeper from './domain/models/odontoradiosisKeeper';
import ScaleManager from './domain/util/scaleManager';
import CanvasOdontoradiosisImpl from './infra/views/canvasImpl';
import * as i0 from "@angular/core";
export class CephalometricCanvasService {
    constructor(infoKeeper, scaleManager) {
        this.infoKeeper = infoKeeper;
        this.scaleManager = scaleManager;
        this.imageLoaded = false;
    }
    init(stackCanvas) {
        this.canvasOdontoradiosis = new CanvasOdontoradiosisImpl(stackCanvas, this.scaleManager, { image: 0, bezier: 1, landmarks: 2 });
        this.imageEffects = new ImageEffects(this.canvasOdontoradiosis);
        this.mainController = new MainController(this.canvasOdontoradiosis, this.scaleManager, this.infoKeeper);
    }
    /**
     * Adding the semiautomatic landmark indentification feature
     * @param tracingController
     * @param landmarksController
     * @returns
     */
    static newSemiautomaticLandmark(tracingController, landmarksController) {
        return new SemiautomaticLandmarks([aJson, enaJson, gnatioJson, nasioJson, selaJson], tracingController, landmarksController);
        // semiautomaticLandmarks.generateButtonEvent();
    }
    get effectsManager() {
        return this.imageEffects;
    }
    get defaultEffectValues() {
        return ImageEffects.defaultValues;
    }
    get tracingController() {
        return this.mainController.tracingController;
    }
    get cephalometricCanvas() {
        return this.mainController.canvasOdontoradiosis;
    }
    get controller() {
        return this.mainController;
    }
    get isImageOpened() {
        return this.imageLoaded;
    }
    openImage(imageData) {
        this.mainController.tracingController.setBezierPoints();
        const self = this;
        this.canvasOdontoradiosis.openImage(imageData, function () {
            self.mainController.loadJsonCurve('');
            self.mainController.loadJsonLandmarks('');
            self.imageLoaded = true;
        });
        this.imageEffects.reset();
    }
}
CephalometricCanvasService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.0", ngImport: i0, type: CephalometricCanvasService, deps: [{ token: OdontoradiosisKeeper }, { token: ScaleManager }], target: i0.ɵɵFactoryTarget.Injectable });
CephalometricCanvasService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "13.0.0", ngImport: i0, type: CephalometricCanvasService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.0", ngImport: i0, type: CephalometricCanvasService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: function () { return [{ type: OdontoradiosisKeeper }, { type: ScaleManager }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2VwaGFsb21ldHJpYy1jYW52YXMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL2NlcGhhbG9tZXRyaWMtY2FudmFzL3NyYy9saWIvY2VwaGFsb21ldHJpYy1jYW52YXMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sWUFBWSxNQUFNLG1DQUFtQyxDQUFDO0FBQzdELE9BQU8sY0FBYyxNQUFNLHFDQUFxQyxDQUFDO0FBR2pFLE9BQU8sc0JBQXNCLE1BQU0sK0NBQStDLENBQUM7QUFDbkYsT0FBTyxLQUFLLE1BQU0sK0RBQStELENBQUM7QUFDbEYsT0FBTyxPQUFPLE1BQU0saUVBQWlFLENBQUM7QUFDdEYsT0FBTyxVQUFVLE1BQU0sb0VBQW9FLENBQUM7QUFDNUYsT0FBTyxTQUFTLE1BQU0sbUVBQW1FLENBQUM7QUFDMUYsT0FBTyxRQUFRLE1BQU0sa0VBQWtFLENBQUM7QUFDeEYsT0FBTyxvQkFBb0IsTUFBTSxzQ0FBc0MsQ0FBQztBQUd4RSxPQUFPLFlBQVksTUFBTSw0QkFBNEIsQ0FBQztBQUN0RCxPQUFPLHdCQUF3QixNQUFNLDBCQUEwQixDQUFDOztBQUtoRSxNQUFNLE9BQU8sMEJBQTBCO0lBTW5DLFlBQ1ksVUFBZ0MsRUFDaEMsWUFBMEI7UUFEMUIsZUFBVSxHQUFWLFVBQVUsQ0FBc0I7UUFDaEMsaUJBQVksR0FBWixZQUFZLENBQWM7UUFFbEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7SUFDN0IsQ0FBQztJQUVNLElBQUksQ0FBQyxXQUF3QjtRQUNoQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSx3QkFBd0IsQ0FDcEQsV0FBVyxFQUNYLElBQUksQ0FBQyxZQUFZLEVBQ2pCLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FDeEMsQ0FBQztRQUVGLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFDaEUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLGNBQWMsQ0FDcEMsSUFBSSxDQUFDLG9CQUFvQixFQUN6QixJQUFJLENBQUMsWUFBWSxFQUNqQixJQUFJLENBQUMsVUFBVSxDQUNsQixDQUFDO0lBQ04sQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ksTUFBTSxDQUFDLHdCQUF3QixDQUNsQyxpQkFBb0MsRUFDcEMsbUJBQXdDO1FBRXhDLE9BQU8sSUFBSSxzQkFBc0IsQ0FDN0IsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLEVBQ2pELGlCQUFpQixFQUNqQixtQkFBbUIsQ0FDdEIsQ0FBQztRQUNGLGdEQUFnRDtJQUNwRCxDQUFDO0lBRUQsSUFBVyxjQUFjO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBVyxtQkFBbUI7UUFDMUIsT0FBTyxZQUFZLENBQUMsYUFBYSxDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFXLGlCQUFpQjtRQUN4QixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsaUJBQWlCLENBQUM7SUFDakQsQ0FBQztJQUVELElBQVcsbUJBQW1CO1FBQzFCLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQztJQUNwRCxDQUFDO0lBRUQsSUFBVyxVQUFVO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztJQUMvQixDQUFDO0lBRUQsSUFBVyxhQUFhO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUM1QixDQUFDO0lBRU0sU0FBUyxDQUFDLFNBQWlCO1FBQzlCLElBQUksQ0FBQyxjQUFjLENBQUMsaUJBQWlCLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDeEQsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFO1lBQzNDLElBQUksQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxjQUFjLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDMUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDNUIsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzlCLENBQUM7O3VIQS9FUSwwQkFBMEIsa0JBVGhDLG9CQUFvQixhQUdwQixZQUFZOzJIQU1OLDBCQUEwQixjQUZ2QixNQUFNOzJGQUVULDBCQUEwQjtrQkFIdEMsVUFBVTttQkFBQztvQkFDUixVQUFVLEVBQUUsTUFBTTtpQkFDckI7MERBUk0sb0JBQW9CLFlBR3BCLFlBQVkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCBJbWFnZUVmZmVjdHMgZnJvbSAnLi9kb21haW4vY29udHJvbGxlcnMvaW1hZ2VFZmZlY3RzJztcclxuaW1wb3J0IE1haW5Db250cm9sbGVyIGZyb20gJy4vZG9tYWluL2NvbnRyb2xsZXJzL21haW5Db250cm9sbGVyJztcclxuaW1wb3J0IExhbmRtYXJrc0NvbnRyb2xsZXIgZnJvbSAnLi9kb21haW4vY29udHJvbGxlcnMvc3ViY29udHJvbGxlcnMvbGFuZG1hcmtzQ29udHJvbGxlcic7XHJcbmltcG9ydCBUcmFjaW5nQ29udHJvbGxlciBmcm9tICcuL2RvbWFpbi9jb250cm9sbGVycy9zdWJjb250cm9sbGVycy90cmFjaW5nQ29udHJvbGxlcic7XHJcbmltcG9ydCBTZW1pYXV0b21hdGljTGFuZG1hcmtzIGZyb20gJy4vZG9tYWluL2ZlYXR1cmVzL3NlbWlhdXRvbWF0aWNfbGFuZG1hcmsvaW5pdCc7XHJcbmltcG9ydCBhSnNvbiBmcm9tICcuL2RvbWFpbi9mZWF0dXJlcy9zZW1pYXV0b21hdGljX2xhbmRtYXJrL3JvdXRpbmVzL2EubGRtay5qc29uJztcclxuaW1wb3J0IGVuYUpzb24gZnJvbSAnLi9kb21haW4vZmVhdHVyZXMvc2VtaWF1dG9tYXRpY19sYW5kbWFyay9yb3V0aW5lcy9lbmEubGRtay5qc29uJztcclxuaW1wb3J0IGduYXRpb0pzb24gZnJvbSAnLi9kb21haW4vZmVhdHVyZXMvc2VtaWF1dG9tYXRpY19sYW5kbWFyay9yb3V0aW5lcy9nbmF0aW8ubGRtay5qc29uJztcclxuaW1wb3J0IG5hc2lvSnNvbiBmcm9tICcuL2RvbWFpbi9mZWF0dXJlcy9zZW1pYXV0b21hdGljX2xhbmRtYXJrL3JvdXRpbmVzL25hc2lvLmxkbWsuanNvbic7XHJcbmltcG9ydCBzZWxhSnNvbiBmcm9tICcuL2RvbWFpbi9mZWF0dXJlcy9zZW1pYXV0b21hdGljX2xhbmRtYXJrL3JvdXRpbmVzL3NlbGEubGRtay5qc29uJztcclxuaW1wb3J0IE9kb250b3JhZGlvc2lzS2VlcGVyIGZyb20gJy4vZG9tYWluL21vZGVscy9vZG9udG9yYWRpb3Npc0tlZXBlcic7XHJcbmltcG9ydCB7IElFZmZlY3RWYWx1ZXMgfSBmcm9tICcuL2RvbWFpbi91dGlsL2ludGVyZmFjZXMvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IElDYW52YXNEcmF3IH0gZnJvbSAnLi9kb21haW4vdXRpbC9pbnRlcmZhY2VzL3ZpZXdzL2NhbnZhc0RyYXcnO1xyXG5pbXBvcnQgU2NhbGVNYW5hZ2VyIGZyb20gJy4vZG9tYWluL3V0aWwvc2NhbGVNYW5hZ2VyJztcclxuaW1wb3J0IENhbnZhc09kb250b3JhZGlvc2lzSW1wbCBmcm9tICcuL2luZnJhL3ZpZXdzL2NhbnZhc0ltcGwnO1xyXG5cclxuQEluamVjdGFibGUoe1xyXG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQ2VwaGFsb21ldHJpY0NhbnZhc1NlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBtYWluQ29udHJvbGxlciE6IE1haW5Db250cm9sbGVyO1xyXG4gICAgcHJpdmF0ZSBjYW52YXNPZG9udG9yYWRpb3NpcyE6IElDYW52YXNEcmF3O1xyXG4gICAgcHJpdmF0ZSBpbWFnZUVmZmVjdHMhOiBJbWFnZUVmZmVjdHM7XHJcbiAgICBwcml2YXRlIGltYWdlTG9hZGVkOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgaW5mb0tlZXBlcjogT2RvbnRvcmFkaW9zaXNLZWVwZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBzY2FsZU1hbmFnZXI6IFNjYWxlTWFuYWdlclxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5pbWFnZUxvYWRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0KHN0YWNrQ2FudmFzOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FudmFzT2RvbnRvcmFkaW9zaXMgPSBuZXcgQ2FudmFzT2RvbnRvcmFkaW9zaXNJbXBsKFxyXG4gICAgICAgICAgICBzdGFja0NhbnZhcyxcclxuICAgICAgICAgICAgdGhpcy5zY2FsZU1hbmFnZXIsXHJcbiAgICAgICAgICAgIHsgaW1hZ2U6IDAsIGJlemllcjogMSwgbGFuZG1hcmtzOiAyIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLmltYWdlRWZmZWN0cyA9IG5ldyBJbWFnZUVmZmVjdHModGhpcy5jYW52YXNPZG9udG9yYWRpb3Npcyk7XHJcbiAgICAgICAgdGhpcy5tYWluQ29udHJvbGxlciA9IG5ldyBNYWluQ29udHJvbGxlcihcclxuICAgICAgICAgICAgdGhpcy5jYW52YXNPZG9udG9yYWRpb3NpcyxcclxuICAgICAgICAgICAgdGhpcy5zY2FsZU1hbmFnZXIsXHJcbiAgICAgICAgICAgIHRoaXMuaW5mb0tlZXBlclxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRpbmcgdGhlIHNlbWlhdXRvbWF0aWMgbGFuZG1hcmsgaW5kZW50aWZpY2F0aW9uIGZlYXR1cmVcclxuICAgICAqIEBwYXJhbSB0cmFjaW5nQ29udHJvbGxlclxyXG4gICAgICogQHBhcmFtIGxhbmRtYXJrc0NvbnRyb2xsZXJcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgbmV3U2VtaWF1dG9tYXRpY0xhbmRtYXJrKFxyXG4gICAgICAgIHRyYWNpbmdDb250cm9sbGVyOiBUcmFjaW5nQ29udHJvbGxlcixcclxuICAgICAgICBsYW5kbWFya3NDb250cm9sbGVyOiBMYW5kbWFya3NDb250cm9sbGVyXHJcbiAgICApOiBTZW1pYXV0b21hdGljTGFuZG1hcmtzIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNlbWlhdXRvbWF0aWNMYW5kbWFya3MoXHJcbiAgICAgICAgICAgIFthSnNvbiwgZW5hSnNvbiwgZ25hdGlvSnNvbiwgbmFzaW9Kc29uLCBzZWxhSnNvbl0sXHJcbiAgICAgICAgICAgIHRyYWNpbmdDb250cm9sbGVyLFxyXG4gICAgICAgICAgICBsYW5kbWFya3NDb250cm9sbGVyXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBzZW1pYXV0b21hdGljTGFuZG1hcmtzLmdlbmVyYXRlQnV0dG9uRXZlbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGVmZmVjdHNNYW5hZ2VyKCk6IEltYWdlRWZmZWN0cyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VFZmZlY3RzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZGVmYXVsdEVmZmVjdFZhbHVlcygpOiBJRWZmZWN0VmFsdWVzIHtcclxuICAgICAgICByZXR1cm4gSW1hZ2VFZmZlY3RzLmRlZmF1bHRWYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0cmFjaW5nQ29udHJvbGxlcigpOiBUcmFjaW5nQ29udHJvbGxlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFpbkNvbnRyb2xsZXIudHJhY2luZ0NvbnRyb2xsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBjZXBoYWxvbWV0cmljQ2FudmFzKCk6IElDYW52YXNEcmF3IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYWluQ29udHJvbGxlci5jYW52YXNPZG9udG9yYWRpb3NpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNvbnRyb2xsZXIoKTogTWFpbkNvbnRyb2xsZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1haW5Db250cm9sbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNJbWFnZU9wZW5lZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZUxvYWRlZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb3BlbkltYWdlKGltYWdlRGF0YTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tYWluQ29udHJvbGxlci50cmFjaW5nQ29udHJvbGxlci5zZXRCZXppZXJQb2ludHMoKTtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLmNhbnZhc09kb250b3JhZGlvc2lzLm9wZW5JbWFnZShpbWFnZURhdGEsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5tYWluQ29udHJvbGxlci5sb2FkSnNvbkN1cnZlKCcnKTtcclxuICAgICAgICAgICAgc2VsZi5tYWluQ29udHJvbGxlci5sb2FkSnNvbkxhbmRtYXJrcygnJyk7XHJcbiAgICAgICAgICAgIHNlbGYuaW1hZ2VMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VFZmZlY3RzLnJlc2V0KCk7XHJcbiAgICB9XHJcbn1cclxuIl19