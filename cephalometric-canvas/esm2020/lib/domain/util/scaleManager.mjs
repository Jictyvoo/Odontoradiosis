import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
class ScaleManager {
    constructor() {
        this.pointRadius = 4;
        this.lineWidth = 1;
        this.nameScale = 10;
        this.textRelativePosition = { x: 15, y: 15 };
        this.scaleDrawValue = Object.freeze({
            pointRadius: 4,
            nameScale: 10,
            lineWidth: 2,
            textRelativePosition: Object.freeze({ x: 15, y: 15 }),
        });
    }
    /**
     * Calculate the scale to make canvas dynamic and returns it
     * @param {number} valueToResize
     * @param {boolean} isX
     * @param {CanvasRenderingContext2D} clientRect
     * @param {ClientRect} clientRect
     */
    dynamicCanvasScale(valueToResize = 1, isX = false, context, clientRect) {
        const canvasDimensions = {
            width: clientRect.width,
            height: clientRect.height,
        };
        const imageDimensions = {
            width: context.canvas.width,
            height: context.canvas.height,
        };
        if (isX) {
            return ((imageDimensions.width * valueToResize) / canvasDimensions.width);
        }
        else {
            return ((imageDimensions.height * valueToResize) /
                canvasDimensions.height);
        }
    }
    /**
     * Calculates all scales variables
     * @param {HTMLCanvasElement} canvas
     */
    calculateScales(canvas) {
        const rect = canvas.getBoundingClientRect();
        const context = canvas.getContext('2d');
        const imageDimensions = {
            width: context.canvas.width,
            height: context.canvas.height,
        };
        const isX = imageDimensions.width > imageDimensions.height;
        this.pointRadius = this.dynamicCanvasScale(this.scaleDrawValue.pointRadius, isX, context, rect);
        this.nameScale = this.dynamicCanvasScale(this.scaleDrawValue.nameScale, isX, context, rect);
        this.lineWidth = this.dynamicCanvasScale(this.scaleDrawValue.lineWidth, isX, context, rect);
        this.textRelativePosition.x = this.dynamicCanvasScale(this.scaleDrawValue.textRelativePosition.x, isX, context, rect);
        this.textRelativePosition.y = this.dynamicCanvasScale(this.scaleDrawValue.textRelativePosition.y, isX, context, rect);
    }
    /**
     * Returns an object containing the relative mouse position in Canvas
     * @param {HTMLElement} canvas
     * @param {Event} point
     */
    getMousePos(canvas, point) {
        const rect = canvas.getBoundingClientRect();
        const context = canvas.getContext('2d');
        return {
            x: this.dynamicCanvasScale(point.x - rect.left, true, context, rect),
            y: this.dynamicCanvasScale(point.y - rect.top, false, context, rect),
        };
    }
}
ScaleManager.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.0", ngImport: i0, type: ScaleManager, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
ScaleManager.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "13.0.0", ngImport: i0, type: ScaleManager, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.0", ngImport: i0, type: ScaleManager, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: function () { return []; } });
export default ScaleManager;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NhbGVNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY2VwaGFsb21ldHJpYy1jYW52YXMvc3JjL2xpYi9kb21haW4vdXRpbC9zY2FsZU1hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7QUFHM0MsTUFHTSxZQUFZO0lBWWQ7UUFDSSxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsb0JBQW9CLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQztRQUM3QyxJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDaEMsV0FBVyxFQUFFLENBQUM7WUFDZCxTQUFTLEVBQUUsRUFBRTtZQUNiLFNBQVMsRUFBRSxDQUFDO1lBQ1osb0JBQW9CLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQ3hELENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxrQkFBa0IsQ0FDZCxnQkFBd0IsQ0FBQyxFQUN6QixNQUFlLEtBQUssRUFDcEIsT0FBaUMsRUFDakMsVUFBc0I7UUFFdEIsTUFBTSxnQkFBZ0IsR0FBRztZQUNyQixLQUFLLEVBQUUsVUFBVSxDQUFDLEtBQUs7WUFDdkIsTUFBTSxFQUFFLFVBQVUsQ0FBQyxNQUFNO1NBQzVCLENBQUM7UUFDRixNQUFNLGVBQWUsR0FBRztZQUNwQixLQUFLLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1lBQzNCLE1BQU0sRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU07U0FDaEMsQ0FBQztRQUNGLElBQUksR0FBRyxFQUFFO1lBQ0wsT0FBTyxDQUNILENBQUMsZUFBZSxDQUFDLEtBQUssR0FBRyxhQUFhLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQ25FLENBQUM7U0FDTDthQUFNO1lBQ0gsT0FBTyxDQUNILENBQUMsZUFBZSxDQUFDLE1BQU0sR0FBRyxhQUFhLENBQUM7Z0JBQ3hDLGdCQUFnQixDQUFDLE1BQU0sQ0FDMUIsQ0FBQztTQUNMO0lBQ0wsQ0FBQztJQUVEOzs7T0FHRztJQUNILGVBQWUsQ0FBQyxNQUF5QjtRQUNyQyxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM1QyxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBNkIsQ0FBQztRQUNwRSxNQUFNLGVBQWUsR0FBRztZQUNwQixLQUFLLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1lBQzNCLE1BQU0sRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU07U0FDaEMsQ0FBQztRQUNGLE1BQU0sR0FBRyxHQUFHLGVBQWUsQ0FBQyxLQUFLLEdBQUcsZUFBZSxDQUFDLE1BQU0sQ0FBQztRQUMzRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FDdEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXLEVBQy9CLEdBQUcsRUFDSCxPQUFPLEVBQ1AsSUFBSSxDQUNQLENBQUM7UUFDRixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FDcEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEVBQzdCLEdBQUcsRUFDSCxPQUFPLEVBQ1AsSUFBSSxDQUNQLENBQUM7UUFDRixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FDcEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEVBQzdCLEdBQUcsRUFDSCxPQUFPLEVBQ1AsSUFBSSxDQUNQLENBQUM7UUFDRixJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FDakQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEVBQzFDLEdBQUcsRUFDSCxPQUFPLEVBQ1AsSUFBSSxDQUNQLENBQUM7UUFDRixJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FDakQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLEVBQzFDLEdBQUcsRUFDSCxPQUFPLEVBQ1AsSUFBSSxDQUNQLENBQUM7SUFDTixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFdBQVcsQ0FDUCxNQUF5QixFQUN6QixLQUEwQjtRQUUxQixNQUFNLElBQUksR0FBRyxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUM1QyxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBNkIsQ0FBQztRQUNwRSxPQUFPO1lBQ0gsQ0FBQyxFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FDdEIsS0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxFQUNuQixJQUFJLEVBQ0osT0FBTyxFQUNQLElBQUksQ0FDUDtZQUNELENBQUMsRUFBRSxJQUFJLENBQUMsa0JBQWtCLENBQ3RCLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFDbEIsS0FBSyxFQUNMLE9BQU8sRUFDUCxJQUFJLENBQ1A7U0FDSixDQUFDO0lBQ04sQ0FBQzs7eUdBL0hDLFlBQVk7NkdBQVosWUFBWSxjQUZGLE1BQU07MkZBRWhCLFlBQVk7a0JBSGpCLFVBQVU7bUJBQUM7b0JBQ1IsVUFBVSxFQUFFLE1BQU07aUJBQ3JCOztBQW1JRCxlQUFlLFlBQVksQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSVBvaW50QmlkaW1lbnNpb25hbCB9IGZyb20gJy4vaW50ZXJmYWNlcy9pbnRlcmZhY2VzJztcclxuXHJcbkBJbmplY3RhYmxlKHtcclxuICAgIHByb3ZpZGVkSW46ICdyb290JyxcclxufSlcclxuY2xhc3MgU2NhbGVNYW5hZ2VyIHtcclxuICAgIHB1YmxpYyBwb2ludFJhZGl1czogbnVtYmVyO1xyXG4gICAgcHVibGljIGxpbmVXaWR0aDogbnVtYmVyO1xyXG4gICAgcHVibGljIG5hbWVTY2FsZTogbnVtYmVyO1xyXG4gICAgcHVibGljIHRleHRSZWxhdGl2ZVBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgICBwdWJsaWMgc2NhbGVEcmF3VmFsdWU6IHtcclxuICAgICAgICBwb2ludFJhZGl1czogbnVtYmVyO1xyXG4gICAgICAgIG5hbWVTY2FsZTogbnVtYmVyO1xyXG4gICAgICAgIGxpbmVXaWR0aDogbnVtYmVyO1xyXG4gICAgICAgIHRleHRSZWxhdGl2ZVBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucG9pbnRSYWRpdXMgPSA0O1xyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gMTtcclxuICAgICAgICB0aGlzLm5hbWVTY2FsZSA9IDEwO1xyXG4gICAgICAgIHRoaXMudGV4dFJlbGF0aXZlUG9zaXRpb24gPSB7IHg6IDE1LCB5OiAxNSB9O1xyXG4gICAgICAgIHRoaXMuc2NhbGVEcmF3VmFsdWUgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgcG9pbnRSYWRpdXM6IDQsXHJcbiAgICAgICAgICAgIG5hbWVTY2FsZTogMTAsXHJcbiAgICAgICAgICAgIGxpbmVXaWR0aDogMixcclxuICAgICAgICAgICAgdGV4dFJlbGF0aXZlUG9zaXRpb246IE9iamVjdC5mcmVlemUoeyB4OiAxNSwgeTogMTUgfSksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgdGhlIHNjYWxlIHRvIG1ha2UgY2FudmFzIGR5bmFtaWMgYW5kIHJldHVybnMgaXRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVRvUmVzaXplXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzWFxyXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNsaWVudFJlY3RcclxuICAgICAqIEBwYXJhbSB7Q2xpZW50UmVjdH0gY2xpZW50UmVjdFxyXG4gICAgICovXHJcbiAgICBkeW5hbWljQ2FudmFzU2NhbGUoXHJcbiAgICAgICAgdmFsdWVUb1Jlc2l6ZTogbnVtYmVyID0gMSxcclxuICAgICAgICBpc1g6IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgICAgICBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXHJcbiAgICAgICAgY2xpZW50UmVjdDogQ2xpZW50UmVjdFxyXG4gICAgKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCBjYW52YXNEaW1lbnNpb25zID0ge1xyXG4gICAgICAgICAgICB3aWR0aDogY2xpZW50UmVjdC53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjbGllbnRSZWN0LmhlaWdodCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGltYWdlRGltZW5zaW9ucyA9IHtcclxuICAgICAgICAgICAgd2lkdGg6IGNvbnRleHQuY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IGNvbnRleHQuY2FudmFzLmhlaWdodCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChpc1gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIChpbWFnZURpbWVuc2lvbnMud2lkdGggKiB2YWx1ZVRvUmVzaXplKSAvIGNhbnZhc0RpbWVuc2lvbnMud2lkdGhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgKGltYWdlRGltZW5zaW9ucy5oZWlnaHQgKiB2YWx1ZVRvUmVzaXplKSAvXHJcbiAgICAgICAgICAgICAgICBjYW52YXNEaW1lbnNpb25zLmhlaWdodFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZXMgYWxsIHNjYWxlcyB2YXJpYWJsZXNcclxuICAgICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IGNhbnZhc1xyXG4gICAgICovXHJcbiAgICBjYWxjdWxhdGVTY2FsZXMoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgICAgICBjb25zdCBpbWFnZURpbWVuc2lvbnMgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBjb250ZXh0LmNhbnZhcy53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjb250ZXh0LmNhbnZhcy5oZWlnaHQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBpc1ggPSBpbWFnZURpbWVuc2lvbnMud2lkdGggPiBpbWFnZURpbWVuc2lvbnMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMucG9pbnRSYWRpdXMgPSB0aGlzLmR5bmFtaWNDYW52YXNTY2FsZShcclxuICAgICAgICAgICAgdGhpcy5zY2FsZURyYXdWYWx1ZS5wb2ludFJhZGl1cyxcclxuICAgICAgICAgICAgaXNYLFxyXG4gICAgICAgICAgICBjb250ZXh0LFxyXG4gICAgICAgICAgICByZWN0XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLm5hbWVTY2FsZSA9IHRoaXMuZHluYW1pY0NhbnZhc1NjYWxlKFxyXG4gICAgICAgICAgICB0aGlzLnNjYWxlRHJhd1ZhbHVlLm5hbWVTY2FsZSxcclxuICAgICAgICAgICAgaXNYLFxyXG4gICAgICAgICAgICBjb250ZXh0LFxyXG4gICAgICAgICAgICByZWN0XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmxpbmVXaWR0aCA9IHRoaXMuZHluYW1pY0NhbnZhc1NjYWxlKFxyXG4gICAgICAgICAgICB0aGlzLnNjYWxlRHJhd1ZhbHVlLmxpbmVXaWR0aCxcclxuICAgICAgICAgICAgaXNYLFxyXG4gICAgICAgICAgICBjb250ZXh0LFxyXG4gICAgICAgICAgICByZWN0XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnRleHRSZWxhdGl2ZVBvc2l0aW9uLnggPSB0aGlzLmR5bmFtaWNDYW52YXNTY2FsZShcclxuICAgICAgICAgICAgdGhpcy5zY2FsZURyYXdWYWx1ZS50ZXh0UmVsYXRpdmVQb3NpdGlvbi54LFxyXG4gICAgICAgICAgICBpc1gsXHJcbiAgICAgICAgICAgIGNvbnRleHQsXHJcbiAgICAgICAgICAgIHJlY3RcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMudGV4dFJlbGF0aXZlUG9zaXRpb24ueSA9IHRoaXMuZHluYW1pY0NhbnZhc1NjYWxlKFxyXG4gICAgICAgICAgICB0aGlzLnNjYWxlRHJhd1ZhbHVlLnRleHRSZWxhdGl2ZVBvc2l0aW9uLnksXHJcbiAgICAgICAgICAgIGlzWCxcclxuICAgICAgICAgICAgY29udGV4dCxcclxuICAgICAgICAgICAgcmVjdFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSByZWxhdGl2ZSBtb3VzZSBwb3NpdGlvbiBpbiBDYW52YXNcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhbnZhc1xyXG4gICAgICogQHBhcmFtIHtFdmVudH0gcG9pbnRcclxuICAgICAqL1xyXG4gICAgZ2V0TW91c2VQb3MoXHJcbiAgICAgICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCxcclxuICAgICAgICBwb2ludDogSVBvaW50QmlkaW1lbnNpb25hbFxyXG4gICAgKTogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9IHtcclxuICAgICAgICBjb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogdGhpcy5keW5hbWljQ2FudmFzU2NhbGUoXHJcbiAgICAgICAgICAgICAgICBwb2ludC54IC0gcmVjdC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICByZWN0XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIHk6IHRoaXMuZHluYW1pY0NhbnZhc1NjYWxlKFxyXG4gICAgICAgICAgICAgICAgcG9pbnQueSAtIHJlY3QudG9wLFxyXG4gICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgcmVjdFxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNjYWxlTWFuYWdlcjtcclxuIl19